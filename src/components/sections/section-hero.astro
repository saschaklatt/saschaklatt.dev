---
import {Picture} from "astro:assets";

import Icon from "@/assets/images/icons/saschaklatt.svg";

import ClickTracker from "@/components/click-tracker.astro";
import Editor from "@/components/editor.astro";
import Iphone from "@/components/decorations/iphone.astro";
import WavesHeader from "@/components/decorations/waves-header.astro";
import {getBreakpoints, numToPx} from "@/utils";

import imageMe from "@/content/me.png";

import type {CtaProps, EditorTab} from "@/typedefs";

interface Props {
    id?: string;
    developerName: string;
    developerTitle: string;
    editorTabs: EditorTab[];
    ctas: CtaProps[];
}

const {developerName, developerTitle, editorTabs, id, ctas} = Astro.props;

const breakpoints = getBreakpoints();
---

<section class="bg-hero-gradient flex flex-col justify-center" id={id}>
    <div
        class="content w-full md:w-auto pt-20 md:pt-32 pb-20 inline-flex items-center flex-col-reverse md:flex-row-reverse gap-x-32 gap-y-8"
    >
        <div class="flex flex-col gap-y-8 relative w-full md:w-132">
            <Icon
                class="w-40 h-40 md:w-24 md:h-24 absolute -top-60 left-1/2 text-neutral-900 md:left-auto md:-top-5 md:right-0 rotate-12 drop-shadow-2xl"
            />
            <h1 class="text-center md:text-left drop-shadow-2xl uppercase" slot="stage">
                <span class="block font-bold mb-2 lg:mb-4 text-2xl md:text-3xl lg:text-4xl text-neutral-900">{developerName}</span
                >
                <span class="font-serif block text-4xl lg:text-6xl">{developerTitle}</span>
            </h1>
            <Editor className="drop-shadow-2xl" tabs={editorTabs} />
            <div class="flex flex-col md:flex-row gap-y-2 md:gap-x-4 md:gap-y-0 drop-shadow-2xl">
                {
                    ctas.map((cta) => (
                        <ClickTracker trackingEvent={cta.trackingEvent}>
                            <a class:list={["w-full md:w-auto", cta.class]} href={cta.href} target={cta.target} rel={cta.rel}>
                                {cta.text}
                            </a>
                        </ClickTracker>
                    ))
                }
            </div>
        </div>
        <div class="relative shrink-0">
            <div
                class="-rotate-6 -translate-x-10 md:translate-x-8 lg:translate-x-0 w-32 md:w-auto drop-shadow-2xl max-w-[250px] overflow-hidden relative"
            >
                <Picture
                    alt="A portrait of the developer displayed on a black iPhone."
                    formats={["webp", "avif"]}
                    sizes={`(min-width: ${numToPx(breakpoints.lg)}) 250px, 500px`}
                    draggable="false"
                    priority
                    quality={100}
                    src={imageMe}
                    class="w-full h-full object-cover rounded-2xl md:rounded-4xl"
                    style="aspect-ratio: 250/533;"
                />
                <div class="absolute inset-0 pointer-events-none">
                    <Iphone />
                </div>
            </div>
        </div>
    </div>
    <WavesHeader class="w-full" />
</section>
