---
import {getCollection} from "astro:content";

import Layout from "../layouts/main.astro";
import SectionStage from "../components/section-stage.astro";
import SectionCta from "../components/section-cta.astro";
import SectionHeadlined from "../components/section-headlined.astro";
import CardResource from "../components/card-resource.astro";
import CardProject from "../components/card-project.astro";
import SectionTestimonials from "../components/section-testimonials";
import SectionStageContentIntro from "../components/section-stage-content-intro.astro";
import ClickTracker from "../components/click-tracker.astro";
import SectionImageText from "../components/section-image-text.astro";
import illustrationUiComponentsPhone from "../assets/images/illustration-ui-components-phone.webp";
import illustrationUiComponentsPhone2x from "../assets/images/illustration-ui-components-phone@2x.webp";
import illustrationUiComponentsPhone4x from "../assets/images/illustration-ui-components-phone@4x.webp";
import illustrationHeadlessCms from "../assets/images/illustration-headless-cms.webp";
import illustrationHeadlessCms2x from "../assets/images/illustration-headless-cms@2x.webp";
import illustrationHeadlessCms4x from "../assets/images/illustration-headless-cms@4x.webp";
import illustrationApiCloudScreen from "../assets/images/illustration-api-cloud-screen.webp";
import illustrationApiCloudScreen2x from "../assets/images/illustration-api-cloud-screen@2x.webp";
import illustrationApiCloudScreen4x from "../assets/images/illustration-api-cloud-screen@4x.webp";
import illustrationRocketCloud from "../assets/images/illustration-rocket-cloud.webp";
import illustrationRocketCloud2x from "../assets/images/illustration-rocket-cloud@2x.webp";
import illustrationRocketCloud4x from "../assets/images/illustration-rocket-cloud@4x.webp";
import illustrationMongodb from "../assets/images/illustration-mongodb.webp";
import illustrationMongodb2x from "../assets/images/illustration-mongodb@2x.webp";
import illustrationMongodb4x from "../assets/images/illustration-mongodb@4x.webp";
import {Me} from "../content/me";

const sortByOrder =
    (direction: "asc" | "desc") =>
    <T extends {data: {order: number}}>(list: T[]): T[] => {
        return list.sort((a, b) => (direction === "asc" ? a.data.order - b.data.order : b.data.order - a.data.order));
    };

const allTestimonials = await getCollection("testimonials").then(sortByOrder("asc"));
const allProjects = await getCollection("projects").then(sortByOrder("desc"));
---

<Layout
    slug="/"
    title="Sascha Klatt | full-stack developer"
    description="Freelance full-stack developer building web apps and enterprise websites preferably with React, Next.js and Node.js."
>
    <SectionStage slot="stage">
        <SectionStageContentIntro />
    </SectionStage>
    <SectionImageText
        slot="main"
        id="services"
        class="mt-20 my-48 md:mt-48 md:mb-64"
        headline="my services"
        subline="Here's what I can do for you 🧑🏻‍💻"
        items={[
            {
                image: illustrationUiComponentsPhone,
                image2x: illustrationUiComponentsPhone2x,
                image4x: illustrationUiComponentsPhone4x,
                imageAlt: "Illustration of a mobile phone with UI components floating on top.",
                title: "Front-end Web Development",
                text: `Want to build a composable website, a data-heavy web app, or something in between? With years of front-end development expertise, I can create engaging, robust user experiences across all modern browsers and devices. I create component libraries, ensure smooth animations, adherence to accessibility guidelines, and provide load time improvements, on-site SEO, automated testing, multi-language support, third-party API integrations, user tracking, A/B testing, and Core Web Vitals optimization.`,
            },
            {
                image: illustrationHeadlessCms,
                image2x: illustrationHeadlessCms2x,
                image4x: illustrationHeadlessCms4x,
                imageAlt: "Illustration of all content of the headless CMS distributed to different devices.",
                title: "Headless CMS Integration",
                text: "Is your content management chaotic and time-consuming? With cutting-edge headless CMS solutions like Contentful or Sanity, I can help set up a content hub to streamline your content across all platforms, including websites, mobile apps, e-commerce platforms, and games. From setup to seamlessly connecting your headless CMS to your website or application, I offer expertise in content modeling, data migrations, and customized content editing experiences, providing solutions tailored to your unique business needs.",
            },
            {
                image: illustrationMongodb,
                image2x: illustrationMongodb2x,
                image4x: illustrationMongodb4x,
                imageAlt: "Illustration of a MongoDB database with documents and a lock.",
                title: "MongoDB Modeling & Integration",
                text: "With my expertise in MongoDB, I can help you design and implement scalable, high-performance databases tailored to your needs. Whether you're building a data-heavy application, managing complex data structures, or optimizing existing databases, I provide solutions that ensure efficient data storage, retrieval, and management. Let's transform your data management strategy and elevate your application's performance.",
            },
            {
                image: illustrationApiCloudScreen,
                image2x: illustrationApiCloudScreen2x,
                image4x: illustrationApiCloudScreen4x,
                imageAlt: "Illustration of a cloud and a screen connected by wires.",
                title: "API Design & Development",
                text: "Looking to power your web application with a robust and scalable API? With my expertise in modern back-end technologies, I can help you build powerful and flexible solutions tailored to your needs. Whether you're looking to develop RESTful APIs for seamless data exchange or harness the flexibility and efficiency of GraphQL for your application, I've got you covered. Let's work together to craft an API that powers your applications with speed and reliability.",
            },
            {
                image: illustrationRocketCloud,
                image2x: illustrationRocketCloud2x,
                image4x: illustrationRocketCloud4x,
                imageAlt: "Illustration of a rocket deploying content to a cloud.",
                title: "Cloud Hosting, CI/CD & Docker",
                text: "With expertise in modern cloud hosting platforms like Vercel and Netlify, as well as comprehensive CI/CD pipelines, I help streamline deployment processes for maximum efficiency. I also bring solid experience with Docker, enabling consistent and portable development and production environments, simplifying builds, and improving scalability. Leveraging technologies such as incremental static regeneration (ISR) and global CDNs, I ensure fast, reliable deployments — even for large websites with thousands of pages. The result: blazing-fast load times, robust handling of high traffic, and an exceptional user experience.",
            },
        ]}
    />
    <SectionHeadlined
        slot="main"
        class="my-20 md:my-32"
        headline="Projects"
        subline="Curious about what I can deliver? Explore a selection of projects I've worked on."
        id="projects"
    >
        <ul class="flex flex-col gap-16">
            {
                allProjects.map((project) => (
                    <li id={`project-${project.id}`}>
                        <CardProject project={project} />
                    </li>
                ))
            }
        </ul>
    </SectionHeadlined>
    <SectionCta slot="main" headline="Need dev support?" message="Let me help you creating high-quality digital products.">
        <ClickTracker
            slot="actions"
            trackingEvent={{action: "click", category: "cta_email", name: "cta_email_section-cta-dev-support"}}
        >
            <a class="btn-accent" href={`mailto:${Me.email}`}>
                {"send me an email"}
            </a>
        </ClickTracker>
    </SectionCta>
    <SectionTestimonials slot="main" testimonials={allTestimonials} headline="Testi­monials" name="testimonial" client:visible />
    <SectionHeadlined
        slot="main"
        class="my-20 md:my-32"
        headline="Let's connect!"
        subline="Download my CV and connect with me on other online platforms."
    >
        <ul class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <CardResource
                title="CV"
                description="Download my up-to-date CV."
                link={{
                    href: "/pdfs/CV-Sascha-Klatt.pdf?update=05092023",
                    target: "_blank",
                }}
                iconId="document"
            />
            <CardResource
                title="Email"
                description="Let's get in touch!"
                link={{
                    href: "mailto:hello@saschaklatt.dev",
                }}
                iconId="envelope"
            />
            <CardResource
                title="LinkedIn"
                description="I share insights about my work here every now and then."
                link={{
                    href: "https://www.linkedin.com/in/sascha-klatt/",
                    target: "_blank",
                }}
                iconId="linkedin"
            />
            <CardResource
                title="X"
                description="I share insights about my work here every now and then."
                link={{
                    href: "https://www.linkedin.com/in/sascha-klatt/",
                    target: "_blank",
                }}
                iconId="x"
            />
            <CardResource
                title="Instagram"
                description="If you're interested in my personal life → I'm an open book ;)"
                link={{
                    href: "https://www.instagram.com/klattmansash/",
                    target: "_blank",
                }}
                iconId="instagram"
            />
        </ul>
    </SectionHeadlined>
    <SectionCta slot="main" headline="Thanks for visiting!" message="If you want to collaborate don't hestiate to...">
        <ClickTracker
            slot="actions"
            trackingEvent={{action: "click", category: "cta_email", name: "cta_email_section-cta-thanks"}}
        >
            <a class="btn-accent" href={`mailto:${Me.email}`}>
                {"send me an email"}
            </a>
        </ClickTracker>
    </SectionCta>
</Layout>
